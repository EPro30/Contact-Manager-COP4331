<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Create Account</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <!-- style sheets -->
        <link
            href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css"
            rel="stylesheet"
            integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD"
            crossorigin="anonymous"
        />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css"
        />
        <link
            rel="stylesheet"
            href="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.css"
        />

        <!-- Scripts -->
        <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
        <script src="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>
        <script
            src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN"
            crossorigin="anonymous"
        ></script>
        <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js"></script>
        <!-- style -->

        <!-- Mission Critical V -->
        <link rel="stylesheet" href="css/custom.css" />
        <script src="js/code.js"></script>
        <script src="js/looks.js"></script>

        <!-- Mission Critical ^ -->
    </head>
    <body class="bg-primary p-1" onload=" styling()">
        <div
            class="container h-75 d-flex align-items-center justify-content-center"
        >
            <div class="row pt-3">
                <div class="card-sm bg-dark w-100 rounded-5 shadow-lg">
                    <div class="card-body-sm rounded-5">
                        <div class="container-fluid flex-start">
                            <button
                                type="button"
                                class="btn btn-outline-primary rounded-pill mt-5"
                                onclick="location.href='index.html'"
                            >
                                <svg
                                    xmlns="http://www.w3.org/2000/svg"
                                    width="28"
                                    height="28"
                                    class="bi bi-arrow-left"
                                    viewBox="0 0 16 16"
                                    class="p-2"
                                    style="padding: 3px"
                                >
                                    <defs>
                                        <linearGradient id="Gradient1">
                                            <stop
                                                class="stop1"
                                                stop-color=" var(--colorA)"
                                                offset="0%"
                                            />
                                            <stop
                                                class="stop2"
                                                stop-color=" var(--colorB)"
                                                offset="100%"
                                            />
                                        </linearGradient>
                                        <linearGradient id="Gradient2">
                                            <stop
                                                class="stop3"
                                                stop-color="white"
                                                offset="0%"
                                            />
                                            <stop
                                                class="stop4"
                                                stop-color="white"
                                                offset="100%"
                                            />
                                        </linearGradient>
                                    </defs>

                                    <path
                                        fill-rule="evenodd"
                                        d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"
                                    />
                                </svg>

                                <div
                                    class="col-sm|md|lg|xl|xxl-6 p-2 mx-5 text-center align-self-center"
                                    style="display: block"
                                >
                                    <h1
                                        class="gradient-text display-4 pb-5 pt-2 px-5 mx-5 gap-3"
                                    >
                                        Create Account
                                    </h1>
                                    <form id="form">
                                        <div class="row">
                                            <div class="col">
                                                <div class="mb-3">
                                                    <label
                                                        for="fname"
                                                        class="form-label"
                                                    >
                                                        First Name:
                                                    </label>
                                                    <input
                                                        type="text"
                                                        class="form-control rounded-pill p-2"
                                                        id="fname"
                                                        placeholder="First Name"
                                                        name="fname"
                                                    />
                                                    <div
                                                        id="firstNameError"
                                                        class="invalid-feedback"
                                                    ></div>
                                                </div>
                                            </div>
                                            <div class="col">
                                                <div class="mb-3">
                                                    <label
                                                        for="lname"
                                                        class="form-label"
                                                    >
                                                        Last Name:
                                                    </label>
                                                    <input
                                                        type="text"
                                                        class="form-control rounded-pill p-2"
                                                        id="lname"
                                                        placeholder="Last Name"
                                                        name="lname"
                                                    />
                                                    <div
                                                        id="lastNameError"
                                                        class="invalid-feedback"
                                                    ></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="mb-3 mt-3">
                                            <!-- This should be UserName not email -->
                                            <label
                                                for="email"
                                                class="form-label"
                                                >Email Address:
                                            </label>
                                            <input
                                                type="text"
                                                class="form-control rounded-pill p-2"
                                                id="email"
                                                placeholder="Enter username"
                                                name="email"
                                            />
                                            <div
                                                id="usernameError"
                                                class="invalid-feedback"
                                            ></div>
                                        </div>
                                        <div class="mb-3">
                                            <label for="pwd" class="form-label">
                                                Password:
                                            </label>
                                            <input
                                                type="password"
                                                class="form-control rounded-pill p-2"
                                                id="pwd"
                                                placeholder="Enter password"
                                                name="pswd"
                                            />
                                            <div
                                                id="passwordError"
                                                class="invalid-feedback"
                                            ></div>
                                        </div>

                                        <div class="mb-3">
                                            <label
                                                for="cnfmpwd"
                                                class="form-label"
                                            >
                                                Confirm Password:
                                            </label>
                                            <input
                                                type="password"
                                                class="form-control rounded-pill p-2"
                                                id="cnfmpwd"
                                                placeholder="Confirm password"
                                                name="pswd"
                                            />
                                            <div
                                                id="confirmPasswordError"
                                                class="invalid-feedback"
                                            ></div>

                                            <button
                                                id="submit-Button"
                                                type="button"
                                                class="btn btn-outline-primary rounded-pill mt-5"
                                                onclick="prepSignUp()"
                                            >
                                                Create Account
                                            </button>
                                            <div
                                                id="submitButtonError"
                                                class="invalid-feedback"
                                            ></div>
                                        </div>
                                    </form>
                                </div>

                                <script>
                                    const firstNameTextField =
                                        document.getElementById("fname");
                                    const lastNameTextField =
                                        document.getElementById("lname");
                                    const usernameTextField =
                                        document.getElementById("email");
                                    const passwordTextField =
                                        document.getElementById("pwd");
                                    const confirmPassword =
                                        document.getElementById("cnfmpwd");

                                    function checkEmptyField(
                                        targetElement,
                                        textField
                                    ) {
                                        if (textField.value.trim() === "") {
                                            textField.classList.add(
                                                "is-invalid"
                                            );
                                            targetElement.innerHTML =
                                                "Field cannot be empty.";
                                            targetElement.style.display =
                                                "block";
                                        } else {
                                            textField.classList.remove(
                                                "is-invalid"
                                            );
                                            targetElement.innerHTML = "";
                                            targetElement.style.display =
                                                "none";
                                        }
                                    }

                                    // Script to check if firstname is empty on unfocus (blue)
                                    firstNameTextField.addEventListener(
                                        "blur",
                                        function () {
                                            checkEmptyField(
                                                document.getElementById(
                                                    "firstNameError"
                                                ),
                                                firstNameTextField
                                            );
                                        }
                                    );

                                    // Script to check if last name is empty on unfocus (blur)
                                    lastNameTextField.addEventListener(
                                        "blur",
                                        function () {
                                            checkEmptyField(
                                                document.getElementById(
                                                    "lastNameError"
                                                ),
                                                lastNameTextField
                                            );
                                        }
                                    );

                                    usernameTextField.addEventListener(
                                        "blur",
                                        function () {
                                            checkEmptyField(
                                                document.getElementById(
                                                    "usernameError"
                                                ),
                                                usernameTextField
                                            );
                                        }
                                    );

                                    passwordTextField.addEventListener(
                                        "blur",
                                        function () {
                                            checkEmptyField(
                                                document.getElementById(
                                                    "passwordError"
                                                ),
                                                passwordTextField
                                            );
                                        }
                                    );

                                    usernameTextField.addEventListener(
                                        "focus",
                                        function () {
                                            const targetElement =
                                                document.getElementById(
                                                    "usernameError"
                                                );
                                            if (
                                                targetElement.style.display ===
                                                "block"
                                            ) {
                                                targetElement.style.display =
                                                    "none";
                                            }
                                        }
                                    );

                                    function checkMatchingPasswords(
                                        targetElement
                                    ) {
                                        if (
                                            passwordTextField.value !==
                                            confirmPassword.value
                                        ) {
                                            confirmPassword.classList.add(
                                                "is-invalid"
                                            );
                                            targetElement.innerHTML =
                                                "The passwords do not match.";
                                            targetElement.style.display =
                                                "block";
                                        } else {
                                            confirmPassword.classList.remove(
                                                "is-invalid"
                                            );
                                            targetElement.innerHTML = "";
                                            targetElement.style.display =
                                                "none";
                                        }
                                    }

                                    confirmPassword.addEventListener(
                                        "blur",
                                        function () {
                                            checkMatchingPasswords(
                                                document.getElementById(
                                                    "confirmPasswordError"
                                                )
                                            );
                                        }
                                    );

                                    passwordTextField.addEventListener(
                                        "blur",
                                        function () {
                                            checkMatchingPasswords(
                                                document.getElementById(
                                                    "confirmPasswordError"
                                                )
                                            );
                                        }
                                    );

                                    // const submitButton = document.getElementById("submit-Button");
                                    function prepSignUp() {
                                        const targetElement =
                                            document.getElementById(
                                                "submitButtonError"
                                            );
                                        if (checkIsInvalidFeedback()) {
                                            targetElement.innerHTML =
                                                "Please fix the errors before submitting.";
                                            targetElement.style.display =
                                                "block";
                                        } else if (checkAllEmptyFields()) {
                                            targetElement.innerHTML =
                                                "Please enter information for each field before submitting.";
                                            targetElement.style.display =
                                                "block";
                                        } else {
                                            SignUp();
                                        }
                                    }

                                    function checkIsInvalidFeedback() {
                                        const invalidFields =
                                            document.querySelectorAll(
                                                "input[type='text'].is-invalid"
                                            );
                                        return invalidFields.length > 0;
                                    }

                                    function checkAllEmptyFields() {
                                        const from =
                                            document.getElementById("form");
                                        const textFields =
                                            form.querySelectorAll(
                                                'input[type="text"]'
                                            );
                                        for (
                                            let i = 0;
                                            i < textFields.length;
                                            i++
                                        ) {
                                            if (
                                                textFields[i].value.trim() ===
                                                ""
                                            ) {
                                                return true;
                                            }
                                        }
                                        return false;
                                    }
                                </script>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
