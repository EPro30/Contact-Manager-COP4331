<!DOCTYPE html>
<html lang="en">
<head>
    <title>Login</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- style sheets -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.7.2/font/bootstrap-icons.css">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.css">
    

    
    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/jquery/dist/jquery.min.js"></script>
    <script src="https://unpkg.com/bootstrap-table@1.21.2/dist/bootstrap-table.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js" integrity="sha384-w76AqPfDkMBDXo30jS1Sgez6pr3x5MlQ1ZAGC+nuZB+EYdgRZgiwxhTBTkF7CXvN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
    <!-- style -->
  
    

      <!-- Mission Critical V -->
      <link rel="stylesheet" href="css/custom.css">
      <script src="js/code.js"></script>
      <script src="js/looks.js"></script>

      
      <!-- Mission Critical ^ -->

      <script>
        function resetEmail() {
          var T = document.getElementById("resetEmail");
          T.style.display = "block";  // <-- Set it to block
        }        
      </script>
  </head>
  <body class="bg-primary p-5"  onload=" styling()">
    <div
      class="container h-75 d-flex align-items-center justify-content-center"
    >
      <div class="row">
        <div class="card-sm bg-dark w-100 px-5 rounded-5 shadow-lg">
          <div class="card-body-sm bg">
            <div class="container-fluid flex-start">
              <button
                type="button"
                class="btn btn-outline-primary rounded-pill mt-5"
                onclick="location.href='index.html'"
              >
              <!-- new -->
              <svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" class="bi bi-arrow-left"  viewBox="0 0 16 16" class="p-2" style="padding: 3px">
                <defs>
                  <linearGradient id="Gradient1">
                    <stop class="stop1" stop-color=" var(--colorA)" offset="0%" />
                    <stop class="stop2"  stop-color=" var(--colorB)" offset="100%" />
                  </linearGradient>
                  <linearGradient id="Gradient2">
                    <stop class="stop3" stop-color = 'white' offset="0%" />
                    <stop class="stop4" stop-color = 'white' offset="100%" />
                  </linearGradient>

                </defs>

               <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
                
              </svg>
              </button>
            </div>
            <div
              class="col-sm|md|lg|xl|xxl-6 p-2 mx-5 text-center align-self-center"
              style="display: block"
            >
              <h1 class="gradient-text display-4 pb-5 pt-2 px-5 mx-5 gap-3">Login</h1>
              <form id = "form">
                <div class="mb-3 mt-3">
                  <label for="email" class="form-label"
                    >Email:
                  </label>
                  <input
                    type="text"
                    class="form-control rounded-pill p-2"
                    id="email"
                    placeholder="Enter username"
                    name="email"
                  />
                  <div id="emailError" class="invalid-feedback"></div>
                </div>
                <div class="mb-3">
                  <label for="pwd" class="form-label text-primary"
                    >Password:</label
                  >
                  <input
                    type="password"
                    class="form-control  rounded-pill p-2"
                    id="pwd"
                    placeholder="Enter password"
                    name="pswd"
                  />
                  <div id="passwordError" class="invalid-feedback"></div>
                </div>
                <div class="d-grid gap-3">
                  <button
                  type="button"
                  class="btn btn-outline-primary btn-block rounded-pill mb-2 mt-4"
                  onclick="prepLogin();"
                >
                  Login
                </button>
                <div id="submitButtonError" class="invalid-feedback"></div>
                </div>
                <button
                  type="button"
                  class="btn btn-outline-primary btn-block rounded-pill mb-3 mt-4"
                  onclick="resetEmail();"
                >
                  Forgot Pasword
                </button>
                <div  style="display:none" id = "resetEmail"  class = "p-3 mb-3">
                    <label for="resetEmail" class="form-label text-primary"
                    >Email:
                  </label>
                  <input
                    type="resetEmail"
                    class="form-control  rounded-pill p-2"
                    id="email"
                    placeholder="Enter username"
                    name="email"
                  />
 <!--  Needs stuff from the api-->
                  <button
                  type="button"
                  class="btn btn-outline-primary btn-block rounded-pill mb-5 mt-4"
                  onclick="location.href='resetPassword.html'"
                >
                  Send Key
                </button>
                 
                </div>
               
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
  
  <script>
		const usernameTextField = document.getElementById("email");
		const passwordTextField = document.getElementById("pwd");

		function checkEmptyField(targetElement, textField) {
		if (textField.value.trim() === "") {
		  textField.classList.add("is-invalid");
		  targetElement.innerHTML = "Field cannot be empty.";
		  targetElement.style.display = "block";
		} else {
		  textField.classList.remove("is-invalid");
		  targetElement.innerHTML = "";
		  targetElement.style.display = "none";
		}
		}

		usernameTextField.addEventListener("blur", function () {
		checkEmptyField(
		  document.getElementById("emailError"),
		  usernameTextField
		);
		});

		passwordTextField.addEventListener("blur", function () {
		checkEmptyField(
		  document.getElementById("passwordError"),
		  passwordTextField
		);
		});

    // Change the submit button error or email error
    // if the user tries to input username
		usernameTextField.addEventListener("focus", function () {
		const targetElement = document.getElementById("emailError");
		if (targetElement.style.display === "block") {
		  targetElement.style.display = "none";
		}
   
    const targetSubmitButtonError = document.getElementById("submitButtonError");
    if (targetSubmitButtonError.style.display === "block") {
		  targetSubmitButtonError.style.display = "none";
		}
		});
   
   // Change the submit button error or password error
   // if the user tries to input password
   passwordTextField.addEventListener("focus", function () {
		const targetElement = document.getElementById("passwordError");
		if (targetElement.style.display === "block") {
		  targetElement.style.display = "none";
		}
   
    const targetSubmitButtonError = document.getElementById("submitButtonError");
    if (targetSubmitButtonError.style.display === "block") {
		  targetSubmitButtonError.style.display = "none";
		}
		});

		// const submitButton = document.getElementById("submit-Button");
		function prepLogin() {
		const targetElement = document.getElementById("submitButtonError");
		if (checkIsInvalidFeedback()) {
		  targetElement.innerHTML = "Please enter valid login credentials.";
		  targetElement.style.display = "block";
		} else if (checkAllEmptyFields()) {
		  targetElement.innerHTML =
			"Please enter information for each field before submitting.";
		  targetElement.style.display = "block";
		} else {
		  doLogin();
		}
		}

		function checkIsInvalidFeedback() {
		const invalidFields = document.querySelectorAll(
		  "input[type='text'].is-invalid, input[type='password'].is-invalid"
		);
		return invalidFields.length > 0;
		}

		function checkAllEmptyFields() {
		const from = document.getElementById("form");
		const textFields = form.querySelectorAll('input[type="text"], input[type="password"]');
		for (let i = 0; i < textFields.length; i++) {
		  if (textFields[i].value.trim() === "") {
			return true;
		  }
		}
		return false;
		} 
    
     
      </script>
  
</html>
